<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AndiLabs AI Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        .sidebar {
            width: 280px;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            display: flex;
            flex-direction: column;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }

        .logo h1 {
            color: #fff;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .logo p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }

        .chat-sessions {
            flex: 1;
            overflow-y: auto;
        }

        .session-item {
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .session-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .session-item.active {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .session-item h3 {
            color: #fff;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .session-item p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
        }

        .new-chat-btn {
            background-color: #2c3e50;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(44, 62, 80, 0.3);
        }

        .new-chat-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(44, 62, 80, 0.4);
        }

        .main-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.05);
        }

        .chat-header {
            padding: 20px 30px;
            background: rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-title {
            color: #fff;
            font-size: 20px;
            font-weight: 600;
        }

        .model-selector {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 18px;
            position: relative;
            animation: fadeIn 0.3s ease-in;
        }

        .message.user {
            background: #2c3e50;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .message.bot {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .message-time {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 5px;
        }

        .typing-indicator {
            display: none;
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px 20px;
            border-radius: 18px;
            border-bottom-left-radius: 5px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #2c3e50;
            animation: typing 1.4s infinite;
        }

        .typing-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        .chat-input-container {
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chat-input-wrapper {
            display: flex;
            gap: 15px;
            align-items: flex-end;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 25px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
        }

        .chat-input {
            flex: 1;
            border: none;
            outline: none;
            background: transparent;
            font-size: 16px;
            resize: none;
            max-height: 120px;
            min-height: 20px;
            line-height: 1.4;
            color: #333;
        }

        .send-btn {
            background: linear-gradient(45deg, #2c3e50, #2c3e50);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(44, 62, 80, 0.3);
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(44, 62, 80, 0.4);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .status-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            color: white;
            background: #4CAF50;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .status-indicator.offline {
            background: #f44336;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: scale(1);
                opacity: 0.7;
            }
            30% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 240px;
            }
            
            .container {
                border-radius: 0;
                height: 100vh;
            }
            
            .message {
                max-width: 85%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">
                <h1>AndiLabs</h1>
                <p>AI Assistant</p>
            </div>
            
            <button class="new-chat-btn" onclick="startNewChat()">
                New Chat
            </button>
            
            <div class="chat-sessions">
                <div class="session-item active">
                    <h3>General Chat</h3>
                    <p>5 minutes ago</p>
                </div>
                <div class="session-item">
                    <h3>Code Review</h3>
                    <p>1 hour ago</p>
                </div>
                <div class="session-item">
                    <h3>Project Planning</h3>
                    <p>Yesterday</p>
                </div>
            </div>
        </div>
        
        <div class="main-chat">
            <div class="chat-header">
                <div class="chat-title">AndiLabs AI Assistant</div>
                <select class="model-selector" onchange="changeModel(this.value)">
                    <option value="llama3.2">Llama 3.2</option>
                    <option value="llama3.2-vision">Llama 3.2 Vision</option>
                    <option value="codellama">CodeLlama</option>
                </select>
            </div>
            
            <div class="status-indicator" id="statusIndicator">
                Connected
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="message bot">
                    <div>Hello! I'm your AndiLabs AI Assistant. I'm powered by Llama 3.2 and ready to help you with coding, analysis, creative tasks, and more. How can I assist you today?</div>
                    <div class="message-time">Just now</div>
                </div>
            </div>
            
            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <textarea 
                        class="chat-input" 
                        id="chatInput" 
                        placeholder="Type your message..."
                        onkeydown="handleKeyDown(event)"
                        oninput="autoResize(this)"
                    ></textarea>
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 10L11 13"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentModel = 'llama3.2';
        let isConnected = true;
        let messageHistory = [];

        // API Configuration - Update these for your setup
        const API_CONFIG = {
            anythingLLM: {
                baseUrl: 'http://localhost:3001/api/v1',
                workspace: 'default',
                apiKey: 'your-api-key-here' // You'll need to set this
            },
            ollama: {
                baseUrl: 'http://localhost:11434/api',
                model: 'llama3.2'
            }
        };

        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
        }

        function handleKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;

            // Add user message to chat
            addMessage(message, 'user');
            input.value = '';
            input.style.height = 'auto';
            
            // Show typing indicator
            showTypingIndicator();
            
            try {
                // Send to your AI backend
                const response = await callAI(message);
                hideTypingIndicator();
                addMessage(response, 'bot');
            } catch (error) {
                hideTypingIndicator();
                addMessage('Sorry, I encountered an error. Please try again.', 'bot');
                console.error('AI Error:', error);
            }
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const now = new Date();
            const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.innerHTML = `
                <div>${text}</div>
                <div class="message-time">${time}</div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Add to history
            messageHistory.push({ text, sender, time });
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'block';
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        async function callAI(message) {
            // This is where you'll integrate with your AnythingLLM/Ollama setup
            // For now, returning a mock response
            
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));
            
            // Mock responses based on message content
            const responses = [
                "I understand you're working with AndiLabs. How can I help you with your project?",
                "That's an interesting question. Let me think about that for you.",
                "Based on your request, I'd suggest exploring the following approaches...",
                "I can help you with that! Let me provide some detailed guidance.",
                "Great question! Here's what I would recommend for your AndiLabs project."
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
            
            // Uncomment and modify this section when you're ready to integrate:
            /*
            try {
                const response = await fetch(`${API_CONFIG.anythingLLM.baseUrl}/workspace/${API_CONFIG.anythingLLM.workspace}/chat`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_CONFIG.anythingLLM.apiKey}`
                    },
                    body: JSON.stringify({
                        message: message,
                        mode: 'chat'
                    })
                });
                
                const data = await response.json();
                return data.textResponse || 'Sorry, I couldn\'t process your request.';
            } catch (error) {
                console.error('API Error:', error);
                throw error;
            }
            */
        }

        function changeModel(model) {
            currentModel = model;
            addMessage(`Switched to ${model}`, 'bot');
        }

        function startNewChat() {
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.innerHTML = `
                <div class="message bot">https://github.com/Andilabsint/andilabs-ai-assistant/blob/master/index.html#L1C0-L682C7
                    <div>Hello! I'm your AndiLabs AI Assistant. I'm powered by Llama 3.2 and ready to help you with coding, analysis, creative tasks, and more. How can I assist you today?</div>
                    <div class="message-time">Just now</div>
                </div>
            `;
            messageHistory = [];
        }

        // Connection status simulation
        function updateConnectionStatus() {
            const statusIndicator = document.getElementById('statusIndicator');
            if (isConnected) {
                statusIndicator.textContent = 'ðŸŸ¢ Connected';
                statusIndicator.className = 'status-indicator';
            } else {
                statusIndicator.textContent = 'ðŸ”´ Offline';
                statusIndicator.className = 'status-indicator offline';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateConnectionStatus();
            document.getElementById('chatInput').focus();
        });

        // Test connection periodically (you can modify this for real health checks)
        setInterval(() => {
            // Simulate occasional connection issues for demo
            if (Math.random() > 0.95) {
                isConnected = !isConnected;
                updateConnectionStatus();
            }
        }, 5000);
    </script>
</body>
</html>
